CREATE SEQUENCE USERS_HISTORY_INC START WITH 1;
CREATE SEQUENCE Sessions_History_INC START WITH 1;
CREATE SEQUENCE Tablespace_History_INC START WITH 1;
CREATE SEQUENCE Datafile_History_INC START WITH 1;
CREATE SEQUENCE Memory_History_INC START WITH 1;

-- Users_History

CREATE OR REPLACE TRIGGER Users_History_trig
AFTER UPDATE ON USER_T
FOR EACH ROW
BEGIN
    INSERT INTO USER_HISTORY (USER_HISTORY_ID, TIME_STAMP, USER_ID, USER_ID_Hist, USERNAME, EXPIRATION_DATE, STATUS, CREATED_DATE)
    VALUES (USERS_HISTORY_INC.NEXTVAL,CURRENT_TIMESTAMP,:new.USER_ID, :new.USER_ID, :new.USERNAME , :new.EXPIRATION_DATE ,:new.STATUS ,:new.CREATED_DATE);
END;

-- Sessions_History

CREATE OR REPLACE TRIGGER Sessions_History_trig
AFTER UPDATE ON Sessions
FOR EACH ROW
BEGIN
	INSERT INTO Sessions_History (SESSIONS_HISTORY_ID, USERNAME, SERIAL ,TIME_STAMP, SESSIONS_ID, SESSIONS_ID_hist ,CPU, WAIT_SESSIONS, USER_ID)
	VALUES (Sessions_History_inc.NextVal,:new.USERNAME,:new.SERIAL,CURRENT_TIMESTAMP,:new.SESSIONS_ID,:new.SESSIONS_ID,:new.CPU,:new.WAIT_SESSIONS,:new.USER_ID);
END;

-- Tablespace_History

CREATE OR REPLACE TRIGGER Tablespace_History_trig
AFTER UPDATE ON Tablespace_T
FOR EACH ROW
BEGIN
	INSERT INTO Tablespace_History (TABLESPACE_HISTORY_ID, TIME_STAMP, TABLESPACE_ID,NAME_TABLESPACE,SIZE_TABLESPACE,FREE_SPACE,USED,TYPE_TABLESPACE,MAX_SIZE,STATUS,USER_ID,TABLESPACE_NAME)
	Values (Tablespace_History_INC.NEXTVAL,CURRENT_TIMESTAMP,:new.NAME_TABLESPACE,:new.NAME_TABLESPACE,:new.SIZE_TABLESPACE,:new.FREE_SPACE,:new.USED,:new.TYPE_TABLESPACE,:new.MAX_SIZE,:new.STATUS,null,null);
END;


-- Datafile_History

CREATE OR REPLACE TRIGGER Datafile_History_trig
AFTER UPDATE ON Datafile_T
FOR EACH ROW
BEGIN
	INSERT INTO Datafile_History (DATAFILE_HISTORY_ID,TIME_STAMP,DATAFILE_ID,DATAFILE_ID_hist,NAME_DATAFILE,USER_BYTES,AUTOEXTENSIBLE,STATUS,BYTES,NAME_TABLESPACE)
	VALUES (Datafile_History_INC.NEXTVAL,CURRENT_TIMESTAMP,:new.DATAFILE_ID, :new.DATAFILE_ID, :new.NAME_DATAFILE, :new.USER_BYTES, :new.AUTOEXTENSIBLE, :new.STATUS, :new.BYTES, :new.NAME_TABLESPACE);
END;

-- Memory_History

CREATE OR REPLACE TRIGGER Memory_History_trig
AFTER UPDATE ON Memory_T
FOR EACH ROW
BEGIN
	INSERT INTO Memory_History (MEMORY_HISTORY_ID,TIME_STAMP,MEMORY_ID,MEMORY_ID_hist,PGA,DATA_STORAGE,SGA,SHARED_IO_POOL,SHARED_POOL_MEMORY,BUFFER_CACHE_MEMORY,LARGE_POOL,JAVA_POOL,STREAM_POOL,NAME_TABLESPACE)
	VALUES (Memory_History_INC.NextVal,CURRENT_TIMESTAMP,:new.MEMORY_ID, :new.MEMORY_ID, :new.PGA, :new.DATA_STORAGE, :new.SGA, :new.SHARED_IO_POOL, :new.SHARED_POOL_MEMORY, :new.BUFFER_CACHE_MEMORY, :new.LARGE_POOL, :new.JAVA_POOL, :new.STREAM_POOL, :new.NAME_TABLESPACE);
END;

